@using Invoices.Blazor.Layout.Drawer
@using Invoices.Blazor.Layout.NavMenu
@inherits LayoutComponentBase
@inject DarkModeSwitchService DarkModeService
@implements IDisposable

<MudThemeProvider @bind-IsDarkMode="@DarkModeService.IsDarkMode" Theme="@StartTheme.Theme" />
<MudPopoverProvider />
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout>
    <MainAppbar />
    
    <MainDrawer/>
    
    <MudMainContent>
        <MudContainer MaxWidth="MaxWidth.ExtraLarge" Class="my-4">
            @Body
        </MudContainer>
    </MudMainContent>
</MudLayout>

@code {
    protected override void OnInitialized()
    {
        DarkModeService.OnChange += StateHasChanged;
    }

    public void Dispose()
    {
        DarkModeService.OnChange -= StateHasChanged;
    }
}